(()=>{var o=class r{static createButton(f,a={}){let t=document.createElement("button");function d(){let e=null;async function s(n){n.addEventListener("end",u),await f.xr.setSession(n),t.textContent="EXIT VR",e=n}function u(){e.removeEventListener("end",u),t.textContent="ENTER VR",e=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR";let i={...a,optionalFeatures:["local-floor","bounded-floor","layers",...a.optionalFeatures||[]]};t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){e===null?navigator.xr.requestSession("immersive-vr",i).then(s):(e.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",i).then(s).catch(n=>{console.warn(n)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",i).then(s).catch(n=>{console.warn(n)})}function l(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function x(){l(),t.textContent="VR NOT SUPPORTED"}function y(e){l(),console.warn("Exception when trying to call xr.isSessionSupported",e),t.textContent="VR NOT ALLOWED"}function c(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",c(t),navigator.xr.isSessionSupported("immersive-vr").then(function(e){e?d():x(),e&&r.xrSessionIsGranted&&t.click()}).catch(y),t;{let e=document.createElement("a");return window.isSecureContext===!1?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",c(e),e}}static registerSessionGrantedListener(){if(typeof navigator<"u"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{r.xrSessionIsGranted=!0})}}};o.xrSessionIsGranted=!1;o.registerSessionGrantedListener();})();
//# sourceMappingURL=VRButton.js.map
